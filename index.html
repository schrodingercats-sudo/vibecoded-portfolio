<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pratham | Full Stack Developer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;800;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- ✨ Added EmailJS SDK ✨ -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            // Initialize EmailJS with your Public Key
            emailjs.init({
              publicKey: "uZuEsQE9SXIbjD7z8",
            });
        })();
    </script>

    <!-- ✨ Unicorn Studio Library ✨ -->
    <script type="text/javascript">
        !function(){
            if(!window.UnicornStudio){
                window.UnicornStudio={isInitialized:!1};
                var i=document.createElement("script");
                i.src="https://cdn.jsdelivr.net/gh/hiunicornstudio/unicornstudio.js@v1.4.34/dist/unicornStudio.umd.js";
                i.onload=function(){
                    window.UnicornStudio.isInitialized||(UnicornStudio.init(),window.UnicornStudio.isInitialized=!0)
                };
                (document.head || document.body).appendChild(i)
            }
        }();
    </script>

    <style>
        /* --- Base Settings --- */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: #000000;
            overflow-x: hidden;
        }
        
        /* --- Windows 11 Terminal Styles --- */
        #terminal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(240, 240, 240, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.4s ease-out;
        }

        .win11-terminal {
            width: 90%;
            max-width: 800px;
            height: 500px;
            background-color: #0c0c0c;
            color: #cccccc;
            font-family: 'JetBrains Mono', monospace;
            font-size: 15px;
            line-height: 1.5;
            border-radius: 8px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.4);
            border: 1px solid #333;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Terminal Header */
        .terminal-header {
            background-color: #1f1f1f;
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #333;
            user-select: none;
        }

        .terminal-title {
            font-size: 12px;
            color: #fff;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .control-dot { width: 12px; height: 12px; border-radius: 50%; }
        
        /* Terminal Body */
        .terminal-body {
            padding: 16px;
            flex-grow: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 2px;
        }

        .cmd-line { display: flex; align-items: center; width: 100%; }
        .cmd-hidden { display: none !important; }
        .prompt-text { color: #22c55e; margin-right: 8px; white-space: nowrap; }
        .typed-text { color: #ffffff; font-weight: 500; }
        .cursor::after { content: '█'; display: inline-block; margin-left: 4px; color: #cccccc; animation: blink 1s step-end infinite; }

        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        /* --- Hero Animations --- */
        .reveal-text {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .hero-cursor::after {
            content: '|';
            animation: blink 1s infinite;
            color: #000;
            font-weight: 200;
        }

        /* --- Hamburger Animation --- */
        .hamburger-icon {
            width: 24px;
            height: 18px;
            position: relative;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .hamburger-line {
            display: block;
            width: 100%;
            height: 2px;
            background-color: #000;
            transition: all 0.3s ease-in-out;
            transform-origin: center;
        }

        .menu-active .line-1 { transform: translateY(8px) rotate(45deg); }
        .menu-active .line-2 { opacity: 0; transform: translateX(-10px); }
        .menu-active .line-3 { transform: translateY(-8px) rotate(-45deg); }

        /* --- Site Styles --- */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #fff; }
        ::-webkit-scrollbar-thumb { background: #000; border-radius: 4px; }

        .glass {
            background: transparent;
            backdrop-filter: none;
            border-bottom: none;
        }

        .bento-card { transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); }
        .bento-card:hover { transform: translateY(-4px); box-shadow: 8px 8px 0px #000; }
        
        #main-content { opacity: 0; transition: opacity 0.8s ease-in; }
        
        #mobile-menu { transition: transform 0.3s ease; transform-origin: top; }

        /* --- Unicorn Studio Effect Styles --- */
        .unicorn-wrapper {
            position: absolute;
            inset: 0;
            display: none;
            width: 100%;
            height: 100%;
        }
        
        @media (min-width: 768px) {
            .unicorn-wrapper {
                display: block;
            }
        }
        
        #unicorn-effect {
            width: 100%;
            height: 100%;
        }
        
        .unicorn-gradient-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to right, #ffffff 0%, #ffffff 40%, rgba(255, 255, 255, 0) 100%);
            pointer-events: none;
            z-index: 10;
        }

        /* --- AI Chat Modal Styles --- */
        #ai-chat-modal {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(8px);
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        #ai-chat-modal.visible {
            opacity: 1;
            visibility: visible;
        }

        #ai-chat-window {
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            background-color: #fff;
            border: 2px solid #000;
            box-shadow: 8px 8px 0px #000;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            transform: scale(0.95);
            transition: all 0.3s ease;
        }

        #ai-chat-modal.visible #ai-chat-window {
            transform: scale(1);
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 2px solid #000;
        }

        .chat-header h3 {
            font-size: 1.1rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        #chat-close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        #chat-close-btn:hover { transform: rotate(90deg); }

        #chat-messages {
            flex-grow: 1;
            padding: 1rem;
            overflow-y: auto;
            height: 400px;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chat-message {
            max-width: 85%;
            padding: 0.75rem 1rem;
            border-radius: 12px;
            line-height: 1.5;
        }

        .chat-message.user {
            background-color: #000;
            color: #fff;
            align-self: flex-end;
            border-bottom-right-radius: 0;
        }

        .chat-message.ai {
            background-color: #f3f4f6;
            color: #000;
            align-self: flex-start;
            border-bottom-left-radius: 0;
        }

        .chat-message.loading {
            background-color: #f3f4f6;
            color: #555;
            align-self: flex-start;
            border-bottom-left-radius: 0;
            font-style: italic;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .chat-input-form {
            display: flex;
            border-top: 2px solid #000;
            padding: 0.75rem;
            gap: 0.75rem;
        }

        #chat-input {
            flex-grow: 1;
            border: 2px solid #ccc;
            border-radius: 6px;
            padding: 0.75rem;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.2s;
        }
        #chat-input:focus { border-color: #000; }

        #chat-send-btn {
            background-color: #000;
            color: #fff;
            border: none;
            padding: 0 1.25rem;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #chat-send-btn:hover { background-color: #333; }
        #chat-send-btn:disabled { background-color: #888; cursor: not-allowed; }

    </style>
</head>
<body class="antialiased">

    <!-- 1. TERMINAL OVERLAY -->
    <div id="terminal-overlay">
        <div class="win11-terminal">
            <div class="terminal-header">
                <div class="terminal-title">
                    <i class="ph-bold ph-terminal-window"></i>
                    <span id="term-title">Administrator: Command Prompt</span>
                </div>
                <div class="terminal-controls flex gap-2">
                    <div class="control-dot bg-yellow-500"></div>
                    <div class="control-dot bg-green-500"></div>
                    <div class="control-dot bg-red-500"></div>
                </div>
            </div>
            <div class="terminal-body" id="term-body">
                <!-- Content injected by JS -->
            </div>
        </div>
    </div>

    <!-- 2. AI CHAT MODAL -->
    <div id="ai-chat-modal">
        <div id="ai-chat-window">
            <div class="chat-header">
                <h3><i class="ph-fill ph-sparkle text-yellow-500"></i>Pratham's AI Assistant</h3>
                <button id="chat-close-btn" title="Close chat"><i class="ph ph-x-bold"></i></button>
            </div>
            <div id="chat-messages">
                <div class="chat-message ai">
                    Hello! I'm Pratham's AI assistant. Feel free to ask me any questions about his skills or projects.
                </div>
            </div>
            <form id="chat-input-form" class="chat-input-form">
                <input type="text" id="chat-input" placeholder="What projects has he built?" required>
                <button type="submit" id="chat-send-btn">Send</button>
            </form>
        </div>
    </div>

    <!-- 3. MAIN CONTENT -->
    <div id="main-content">
        <!-- Header -->
        <header class="fixed w-full top-0 z-50 glass">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    <div class="flex-shrink-0 flex items-center">
                        <a href="#" class="text-2xl font-bold tracking-tighter border-2 border-black px-2 py-1 hover:bg-black hover:text-white transition-colors">PRATHAM.</a>
                    </div>
                    <!-- Desktop Menu -->
                    <div class="hidden md:flex space-x-8 items-center">
                        <a href="#home" class="text-sm font-bold hover:underline underline-offset-4">HOME</a>
                        <a href="#about" class="text-sm font-bold hover:underline underline-offset-4">ABOUT</a>
                        <a href="#projects" class="text-sm font-bold hover:underline underline-offset-4">PROJECTS</a>
                        <a href="#contact" class="text-sm font-bold hover:underline underline-offset-4">CONTACT</a>
                    </div>
                    <!-- Mobile Button (Animated Hamburger) -->
                    <div class="md:hidden">
                        <button id="mobile-menu-btn" class="p-2 focus:outline-none">
                            <div class="hamburger-icon">
                                <span class="hamburger-line line-1"></span>
                                <span class="hamburger-line line-2"></span>
                                <span class="hamburger-line line-3"></span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
            <!-- Mobile Dropdown -->
            <div id="mobile-menu" class="absolute top-20 left-0 w-full bg-white border-b border-gray-200 transform scale-y-0 md:hidden">
                <div class="px-4 py-4 space-y-4 text-center">
                    <a href="#home" class="block text-lg font-bold py-2 hover:bg-gray-50 transition-colors mobile-link">Home</a>
                    <a href="#about" class="block text-lg font-bold py-2 hover:bg-gray-50 transition-colors mobile-link">About</a>
                    <a href="#projects" class="block text-lg font-bold py-2 hover:bg-gray-50 transition-colors mobile-link">Projects</a>
                    <a href="#contact" class="block text-lg font-bold py-2 hover:bg-gray-50 transition-colors mobile-link">Contact</a>
                </div>
            </div>
        </header>

        <main>
            <!-- Hero -->
            <section id="home" class="min-h-screen flex items-center pt-20 bg-white relative overflow-hidden">
                <!-- Unicorn Studio Effect (Full Coverage) -->
                <div class="unicorn-wrapper">
                    <div id="unicorn-effect" data-us-project="9hDI78HlPhr5uCsgrLMm"></div>
                    <div class="unicorn-gradient-overlay"></div>
                </div>
                
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full relative z-20">
                    <div class="max-w-3xl">
                        <div class="reveal-text flex items-center space-x-2 mb-6">
                            <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                            <span class="text-sm font-mono text-gray-500 font-bold tracking-wider">AVAILABLE FOR HIRE</span>
                        </div>
                        <h1 class="text-6xl md:text-7xl lg:text-8xl font-black tracking-tighter leading-none mb-4">
                            <span id="decrypt-name" class="block">PRATHAM</span>
                        </h1>
                        <h2 class="reveal-text text-3xl md:text-5xl font-bold text-gray-300 mb-8 leading-tight">
                            I BUILD <span id="cycling-roles" class="text-black hero-cursor"></span>
                        </h2>
                        <p class="reveal-text text-lg text-gray-600 mb-10 max-w-lg font-medium leading-relaxed">
                            Full-stack developer crafting digital experiences with a focus on security, minimalism, and performance.
                        </p>
                        <div class="reveal-text flex flex-wrap gap-4">
                            <a href="#projects" class="px-8 py-4 bg-black text-white font-bold border-2 border-black hover:bg-transparent hover:text-black transition-all duration-300">
                                View Projects
                            </a>
                            <a href="#contact" class="px-8 py-4 border-2 border-black font-bold hover:bg-gray-100 transition-colors">
                                Contact Me
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- About -->
            <section id="about" class="py-24 bg-gray-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-16 items-center">
                        <div class="relative border-2 border-black bg-white p-2 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] transition-transform hover:-translate-y-2 duration-500">
                             <img src="https://placehold.co/600x800/111/fff?text=Pratham" alt="Profile" class="w-full h-full object-cover grayscale">
                        </div>
                        <div>
                            <h2 class="text-3xl font-black mb-6">ABOUT ME</h2>
                            <p class="text-lg text-gray-700 mb-6 leading-relaxed">
                                I’m Pratham, a developer based in India. My work focuses on solving critical problems—like digital safety and student collaboration—through clean, efficient code.
                            </p>
                            <div class="grid grid-cols-2 gap-4 mt-8">
                                <div class="border-l-2 border-black pl-4">
                                    <h4 class="font-bold">Frontend</h4>
                                    <p class="text-sm text-gray-600">React, Next.js, Tailwind</p>
                                </div>
                                <div class="border-l-2 border-black pl-4">
                                    <h4 class="font-bold">Backend</h4>
                                    <p class="text-sm text-gray-600">Node.js, Python, Firebase</p>
                                </div>
                                <div class="border-l-2 border-black pl-4">
                                    <h4 class="font-bold">AI & Tools</h4>
                                    <p class="text-sm text-gray-600">Prompt Engineering, Vercel</p>
                                </div>
                            </div>
                            <!-- ✨ GEMINI FEATURE BUTTON ✨ -->
                            <button id="open-ai-chat-btn" class="mt-10 w-full bg-black text-white font-bold py-4 flex items-center justify-center gap-2 hover:bg-gray-800 transition-colors">
                                <i class="ph-fill ph-sparkle text-yellow-400"></i>
                                Ask My AI Assistant About Me
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Bento Grid Projects -->
            <section id="projects" class="py-24">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex justify-between items-end mb-12 border-b-2 border-black pb-4">
                        <h2 class="text-3xl font-black">SELECTED WORK</h2>
                        <span class="font-mono text-xs md:text-sm bg-black text-white px-2 py-1">2024-2025</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 auto-rows-[300px]">
                        <!-- 1. UPI Guard -->
                        <div class="bento-card bg-white border-2 border-black md:col-span-2 md:row-span-2 group cursor-pointer relative overflow-hidden"
                             onclick="launchProject('upi-guard', 'https://upi-checker.vercel.app/', 'npm run analyze')">
                            <div class="absolute top-4 right-4 z-10 bg-black text-white text-xs font-bold px-3 py-1 tracking-widest uppercase">Security</div>
                            <div class="h-2/3 overflow-hidden border-b-2 border-black bg-emerald-900">
                                <img src="https://placehold.co/800x600/064e3b/fff?text=UPI+Guard+Interface" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-90">
                            </div>
                            <div class="p-6 h-1/3 flex flex-col justify-center bg-white relative z-20">
                                <h3 class="text-2xl font-bold group-hover:underline decoration-2 underline-offset-4">UPI Guard</h3>
                                <p class="text-gray-600 mt-2">Detects fake UPI links and SMS to prevent financial scams.</p>
                            </div>
                        </div>
                        <!-- 2. CampsHub -->
                        <div class="bento-card bg-white border-2 border-black md:col-span-1 md:row-span-2 group cursor-pointer relative"
                             onclick="launchProject('camps-hub', 'https://campshub.vercel.app/', 'npm start')">
                             <div class="absolute top-4 right-4 z-10 bg-black text-white text-xs font-bold px-3 py-1 tracking-widest uppercase">EduTech</div>
                            <div class="h-2/3 overflow-hidden border-b-2 border-black bg-blue-900">
                                <img src="https://placehold.co/400x800/1e3a8a/fff?text=Mobile+App" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-90">
                            </div>
                            <div class="p-6 h-1/3 flex flex-col justify-center">
                                <h3 class="text-xl font-bold group-hover:underline decoration-2 underline-offset-4">CampsHub</h3>
                                <p class="text-gray-600 mt-2 text-sm">Student project collaboration platform.</p>
                            </div>
                        </div>
                        <!-- 3. Promptizer -->
                        <div class="bento-card bg-white border-2 border-black md:col-span-1 md:row-span-1 group cursor-pointer relative"
                             onclick="launchProject('promptizer', 'https://promptizer.vercel.app/', 'node optimize.js')">
                             <div class="absolute top-4 right-4 z-10 bg-black text-white text-xs font-bold px-3 py-1 tracking-widest uppercase">AI Tool</div>
                            <div class="h-1/2 overflow-hidden border-b-2 border-black bg-red-900">
                                <img src="https://placehold.co/400x400/7f1d1d/fff?text=AI+Prompt" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-90">
                            </div>
                            <div class="p-4 h-1/2 flex flex-col justify-center">
                                <h3 class="text-lg font-bold group-hover:underline decoration-2 underline-offset-4">Promptizer</h3>
                                <p class="text-gray-600 text-xs mt-1">Optimizer for AI coding models.</p>
                            </div>
                        </div>
                        <!-- 4. GitHub -->
                        <div class="bento-card bg-white border-2 border-black md:col-span-1 md:row-span-1 group cursor-pointer flex flex-col items-center justify-center text-center p-6 hover:bg-gray-50 transition-colors" onclick="window.open('https://github.com', '_blank')">
                            <i class="ph-fill ph-github-logo text-5xl mb-2"></i>
                            <h3 class="font-bold">GitHub</h3>
                            <p class="text-xs text-gray-500 mt-1">Check out my code</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Contact -->
            <section id="contact" class="py-24 bg-black text-white">
                <div class="max-w-2xl mx-auto px-4 text-center">
                    <h2 class="text-4xl font-black mb-8">READY TO BUILD?</h2>
                    <!-- ✨ Updated Form with ID and input names ✨ -->
                    <form id="contact-form" class="text-left space-y-6">
                        <input type="text" name="user_name" placeholder="Name" required class="w-full bg-transparent border-b border-gray-600 py-4 text-white placeholder-gray-500 focus:outline-none focus:border-white transition-colors font-medium">
                        <input type="email" name="user_email" placeholder="Email" required class="w-full bg-transparent border-b border-gray-600 py-4 text-white placeholder-gray-500 focus:outline-none focus:border-white transition-colors font-medium">
                        <textarea name="message" placeholder="Project Details" rows="3" required class="w-full bg-transparent border-b border-gray-600 py-4 text-white placeholder-gray-500 focus:outline-none focus:border-white transition-colors font-medium"></textarea>
                        <button id="contact-submit-btn" type="submit" class="w-full bg-white text-black font-bold py-4 mt-4 hover:bg-gray-200 transition-colors tracking-wide disabled:opacity-50 disabled:cursor-not-allowed">
                            SEND MESSAGE
                        </button>
                        <!-- Status message for success/error -->
                        <p id="contact-status" class="text-center text-sm pt-2"></p> 
                    </form>
                    <div class="mt-16 pt-8 border-t border-gray-800 text-gray-500 text-sm flex justify-between items-center">
                        <span>&copy; 2025 Pratham</span>
                        <div class="space-x-6 flex">
                            <a href="https://x.com/Pratham21207080?t=-EsQA5QIt93UfXARW54B3A&s=09" target="_blank" rel="noopener noreferrer" class="hover:text-white transition-colors"><i class="ph-fill ph-twitter-logo text-xl"></i></a>
                            <a href="https://www.linkedin.com/in/pratham-solanki-a846a331b?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" target="_blank" rel="noopener noreferrer" class="hover:text-white transition-colors"><i class="ph-fill ph-linkedin-logo text-xl"></i></a>
                            <a href="https://github.com/schrodingercats-sudo" target="_blank" rel="noopener noreferrer" class="hover:text-white transition-colors"><i class="ph-fill ph-github-logo text-xl"></i></a>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // DOM Elements
        const termOverlay = document.getElementById('terminal-overlay');
        const termBody = document.getElementById('term-body');
        const mainContent = document.getElementById('main-content');

        // Helper: Async Delay
        const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        // Helper: Typewriter for Terminal
        async function typeText(text, element) {
            element.style.display = 'inline-block'; 
            element.textContent = '';
            element.classList.add('cursor');
            for (let i = 0; i < text.length; i++) {
                element.textContent += text.charAt(i);
                await delay(Math.random() * 20 + 20);
            }
            await delay(200);
            element.classList.remove('cursor');
        }

        function createLine(promptPath = "C:\\Users\\Guest>") {
            const line = document.createElement('div');
            line.className = 'cmd-line cmd-hidden';
            line.innerHTML = `<span class="prompt-text">${promptPath}</span><span class="typed-text"></span>`;
            termBody.appendChild(line);
            return line;
        }

        function addOutput(text, colorClass = 'text-gray-400') {
            const line = document.createElement('div');
            line.className = `cmd-line ${colorClass} mt-1 mb-1`;
            line.innerHTML = text;
            termBody.appendChild(line);
            termBody.scrollTop = termBody.scrollHeight;
        }

        // --- ANIMATION 1: BOOT SEQUENCE ---
        async function runBoot() {
            termBody.innerHTML = `<div class="text-gray-500 mb-4">Microsoft Windows [Version 10.0.22631.4317]<br>(c) Microsoft Corporation. All rights reserved.</div>`;
            await delay(600);

            const line1 = createLine();
            line1.classList.remove('cmd-hidden');
            await typeText('cd "pratham portfolio"', line1.querySelector('.typed-text'));
            await delay(300);

            const line2 = createLine("C:\\Users\\Guest\\pratham portfolio>");
            line2.classList.remove('cmd-hidden');
            await typeText('open .', line2.querySelector('.typed-text'));
            await delay(400);

            addOutput("Initializing environment...", "text-blue-400");
            await delay(300);
            addOutput("Loading assets...", "text-blue-400");
            await delay(400);
            addOutput("Done.", "text-green-400");
            await delay(600);

            termOverlay.style.opacity = '0';
            await delay(400);
            termOverlay.style.display = 'none';
            mainContent.style.opacity = '1';
            
            initHeroAnimations();
        }

        // --- ANIMATION 2: HERO SECTION ---
        function initHeroAnimations() {
            const nameElement = document.getElementById('decrypt-name');
            const originalName = "PRATHAM";
            const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890@#$%&";
            let iterations = 0;
            
            const interval = setInterval(() => {
                nameElement.innerText = originalName.split("").map((letter, index) => {
                    if(index < iterations) return originalName[index];
                    return chars[Math.floor(Math.random() * chars.length)];
                }).join("");
                
                if(iterations >= originalName.length) clearInterval(interval);
                iterations += 1/3;
            }, 30);

            const reveals = document.querySelectorAll('.reveal-text');
            reveals.forEach((el, idx) => {
                setTimeout(() => {
                    el.classList.add('reveal-visible');
                }, 600 + (idx * 200));
            });

            // Initialize Unicorn Studio effect after boot completes
            setTimeout(() => {
                if (window.UnicornStudio && !window.UnicornStudio.effectInitialized) {
                    UnicornStudio.init();
                    window.UnicornStudio.effectInitialized = true;
                }
            }, 800);

            startRoleCycler();
        }

        async function startRoleCycler() {
            const roles = ["SECURITY TOOLS", "AI UTILITIES", "WEB PLATFORMS", "MINIMALIST UI"];
            const element = document.getElementById('cycling-roles');
            let roleIndex = 0;

            while(true) {
                const currentRole = roles[roleIndex];
                
                for(let i=0; i<=currentRole.length; i++) {
                    element.innerText = currentRole.substring(0, i);
                    await delay(50);
                }
                await delay(2000);
                for(let i=currentRole.length; i>=0; i--) {
                    element.innerText = currentRole.substring(0, i);
                    await delay(30);
                }
                await delay(200);
                roleIndex = (roleIndex + 1) % roles.length;
            }
        }

        // --- ANIMATION 3: PROJECT LAUNCH ---
        window.launchProject = async function(name, url, cmd) {
            termOverlay.style.display = 'flex';
            void termOverlay.offsetWidth;
            termOverlay.style.opacity = '1';
            termBody.innerHTML = `<div class="text-gray-500 mb-4">Microsoft Windows [Version 10.0.22631.4317]<br>(c) Microsoft Corporation. All rights reserved.</div>`;
            
            await delay(500);
            
            const line1 = createLine("C:\\Users\\Pratham>");
            line1.classList.remove('cmd-hidden');
            await typeText(`git clone ${name}`, line1.querySelector('.typed-text'));
            await delay(200);
            const line2 = createLine("C:\\Users\\Pratham>");
            line2.classList.remove('cmd-hidden');
            await typeText(`cd ${name}`, line2.querySelector('.typed-text'));
            await delay(200);
            const line3 = createLine(`C:\\Users\\Pratham\\${name}>`);
            line3.classList.remove('cmd-hidden');
            await typeText(cmd, line3.querySelector('.typed-text'));
            await delay(400);

            addOutput(`> ${name}@0.1.0 dev`, 'text-white');
            addOutput(`> next dev`, 'text-gray-400');
            await delay(300);
            addOutput(`ready - started server on 0.0.0.0:3000`, 'text-green-400');
            await delay(400);
            addOutput(`Redirecting to ${url}...`, 'text-yellow-400 font-bold');
            await delay(1000);

            window.location.href = url;
        };

        // --- ✨ GEMINI API CHATBOT LOGIC ✨ ---
        const chatModal = document.getElementById('ai-chat-modal');
        const openChatBtn = document.getElementById('open-ai-chat-btn');
        const closeChatBtn = document.getElementById('chat-close-btn');
        const chatForm = document.getElementById('chat-input-form');
        const chatInput = document.getElementById('chat-input');
        const chatSendBtn = document.getElementById('chat-send-btn');
        const chatMessages = document.getElementById('chat-messages');

        // System prompt to guide the AI
        const systemPrompt = `You are a friendly and professional AI assistant for Pratham, a full-stack developer. Your job is to answer questions about his skills, projects, and experience.

Here is Pratham's information:
- Name: Pratham
- Based in: India
- Role: Full-stack developer
- Skills:
    - Frontend: React, Next.js, Tailwind
    - Backend: Node.js, Python, Firebase
    - AI & Tools: Prompt Engineering, Vercel
- Key Projects:
    1.  **UPI Guard:** A security tool that detects fake UPI links and SMS to prevent financial scams.
    2.  **CampsHub:** An EduTech platform for student project collaboration.
    3.  **Promptizer:** An AI tool that optimizes prompts for AI coding models.
- Personality: You should be helpful, slightly witty, and focused on his professional strengths. 
- Rules:
    - Keep answers concise (2-3 sentences max).
    - Do not answer questions that are not related to Pratham's professional profile. Gently decline and steer the conversation back.
    - Format responses with simple markdown (bold, lists).`;

        // Store chat history
        let chatHistory = [
            { role: "user", parts: [{ text: "Hello" }] },
            { role: "model", parts: [{ text: "Hello! I'm Pratham's AI assistant. Feel free to ask me any questions about his skills or projects." }] }
        ];

        // Open/Close Modal
        openChatBtn.addEventListener('click', () => chatModal.classList.add('visible'));
        closeChatBtn.addEventListener('click', () => chatModal.classList.remove('visible'));
        chatModal.addEventListener('click', (e) => {
            if (e.target === chatModal) chatModal.classList.remove('visible');
        });

        // Handle Chat Submission
        chatForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const userMessage = chatInput.value.trim();
            if (!userMessage) return;

            // Add user message to UI
            addMessageToUI(userMessage, 'user');
            chatInput.value = '';
            chatSendBtn.disabled = true;

            // Add loading indicator
            const loadingIndicator = addMessageToUI('typing...', 'loading');
            
            try {
                // Call Gemini API
                const aiResponse = await callGemini(userMessage);
                
                // Remove loading indicator
                loadingIndicator.remove();
                
                // Add AI response to UI
                addMessageToUI(aiResponse, 'ai');

            } catch (error) {
                loadingIndicator.remove();
                addMessageToUI('Sorry, I ran into an error. Please try again.', 'ai');
            } finally {
                chatSendBtn.disabled = false;
            }
        });

        // Add message to chat window
        function addMessageToUI(message, sender) {
            const messageElement = document.createElement('div');
            messageElement.className = `chat-message ${sender}`;
            messageElement.textContent = message; // Simple text, no markdown rendering for simplicity here
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to bottom
            return messageElement;
        }

        // Call Gemini API via Netlify Function (keeps API key server-side)
        async function callGemini(userMessage) {
            // Add user message to history
            chatHistory.push({ role: "user", parts: [{ text: userMessage }] });

            // Construct payload
            const payload = {
                contents: chatHistory,
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                }
            };

            let response;
            let retries = 3;
            let delayMs = 1000;

            // Retry with exponential backoff
            for (let i = 0; i < retries; i++) {
                try {
                    response = await fetch('/.netlify/functions/gemini', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    const text = result?.text;

                    if (text) {
                        chatHistory.push({ role: "model", parts: [{ text }] });
                        return text;
                    } else {
                        throw new Error('No text in API response.');
                    }

                } catch (error) {
                    if (i === retries - 1) throw error;
                    await delay(delayMs);
                    delayMs *= 2;
                }
            }
        }


        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            runBoot();

            // Mobile Menu
            const menuBtn = document.getElementById('mobile-menu-btn');
            const menu = document.getElementById('mobile-menu');
            const mobileLinks = document.querySelectorAll('.mobile-link');
            let isMenuOpen = false;

            function toggleMenu() {
                isMenuOpen = !isMenuOpen;
                menu.style.transform = isMenuOpen ? 'scaleY(1)' : 'scaleY(0)';
                if (isMenuOpen) menuBtn.classList.add('menu-active');
                else menuBtn.classList.remove('menu-active');
            }

            menuBtn.addEventListener('click', toggleMenu);
            mobileLinks.forEach(link => {
                link.addEventListener('click', () => {
                    if(isMenuOpen) toggleMenu();
                });
            });
            
            // --- ✨ EMAILJS CONTACT FORM LOGIC ✨ ---
            const contactForm = document.getElementById('contact-form');
            const submitBtn = document.getElementById('contact-submit-btn');
            const statusMsg = document.getElementById('contact-status');

            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Update button state
                submitBtn.disabled = true;
                submitBtn.textContent = 'SENDING...';
                statusMsg.textContent = '';
                statusMsg.classList.remove('text-green-400', 'text-red-400');

                // Send the email using EmailJS
                emailjs.sendForm('service_wwodjxl', 'template_xsyzp51', this)
                    .then(() => {
                        // Success
                        statusMsg.textContent = 'Message sent successfully!';
                        statusMsg.classList.add('text-green-400');
                        submitBtn.textContent = 'MESSAGE SENT';
                        contactForm.reset();
                        // Re-enable button after a delay
                        setTimeout(() => {
                            submitBtn.disabled = false;
                            submitBtn.textContent = 'SEND MESSAGE';
                            statusMsg.textContent = '';
                        }, 3000);
                    }, (error) => {
                        // Error
                        statusMsg.textContent = `Failed to send. Error: ${error.text}`;
                        statusMsg.classList.add('text-red-400');
                        submitBtn.disabled = false;
                        submitBtn.textContent = 'SEND MESSAGE';
                    });
            });
        });
    </script>
</body>
</html>